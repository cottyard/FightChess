// Generated by CoffeeScript 1.8.0

/*
data structure spec
  pos: [pos_x, pos_y]
  coord: [coord_x, coord_y]

all events:

raw input
  mousedown, mouseup, mousemove {pos}
input operation
  pick, drop, hover {coord}
game operation
  op_movepiece {piece, coord_to}
battle
  battle_attack {piece_atker, piece_atkee}
  battle_assist {piece_aster, piece_astee}
  battle_move {piece, coord_to}
game
  gametick {}
  render {}
 */

(function() {
  var handlers, hook, trigger, unhook;

  handlers = {};

  trigger = function(evt_name, evt) {
    var hdl, _i, _len, _ref, _results;
    if (handlers[evt_name] != null) {
      _ref = handlers[evt_name];
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        hdl = _ref[_i];
        _results.push(hdl(evt));
      }
      return _results;
    }
  };

  hook = function(evt_name, hdl) {
    if (handlers[evt_name] == null) {
      handlers[evt_name] = [];
    }
    return handlers[evt_name].push(hdl);
  };

  unhook = function(evt_name, hdl) {
    var hdls, i;
    hdls = handlers[evt_name];
    if (hdls != null) {
      i = hdls.indexOf(hdl);
      if (i !== -1) {
        return hdls.splice(i, 1);
      }
    }
  };

  window.ev = {
    trigger: trigger,
    hook: hook,
    unhook: unhook
  };

}).call(this);
