{
  "version": 3,
  "file": "battle.js",
  "sourceRoot": "..\\..\\..",
  "sources": [
    "src\\game\\core\\battle.coffee"
  ],
  "names": [],
  "mappings": ";AAAA;AAAA,MAAA,YAAA,EAAA,YAAA,EAAA,aAAA,EAAA,mBAAA,EAAA,aAAA,EAAA,mBAAA,EAAA,WAAA,EAAA,iBAAA,EAAA,IAAA,EAAA,UAAA,EAAA,gBAAA,EAAA,gBAAA,EAAA;;EAAA,YAAA,GAAe;;EACf,YAAA,GAAe;;EACf,UAAA,GAAa;;EAEb,gBAAA,GAAmB,QAAA,CAAC,GAAD,CAAA;WACjB,YAAY,CAAC,IAAb,CAAkB,GAAlB;EADiB;;EAGnB,gBAAA,GAAmB,QAAA,CAAC,GAAD,CAAA;WACjB,YAAY,CAAC,IAAb,CAAkB,GAAlB;EADiB;;EAGnB,cAAA,GAAiB,QAAA,CAAC,GAAD,CAAA;WACf,UAAU,CAAC,IAAX,CAAgB,GAAhB;EADe;;EAGjB,mBAAA,GAAsB,QAAA,CAAC,GAAD,CAAA;AACpB,QAAA;AAAA;WAAM,YAAY,CAAC,MAAb,GAAsB,CAA5B;mBACE,aAAA,CAAc,GAAG,CAAC,KAAlB,EAAyB,YAAY,CAAC,KAAb,CAAA,CAAzB;IADF,CAAA;;EADoB;;EAItB,mBAAA,GAAsB,QAAA,CAAC,GAAD,CAAA;AACpB,QAAA;AAAA;WAAM,YAAY,CAAC,MAAb,GAAsB,CAA5B;mBACE,aAAA,CAAc,GAAG,CAAC,KAAlB,EAAyB,YAAY,CAAC,KAAb,CAAA,CAAzB;IADF,CAAA;;EADoB;;EAItB,iBAAA,GAAoB,QAAA,CAAC,GAAD,CAAA;AAClB,QAAA;AAAA;WAAM,UAAU,CAAC,MAAX,GAAoB,CAA1B;mBACE,WAAA,CAAY,GAAG,CAAC,KAAhB,EAAuB,UAAU,CAAC,KAAX,CAAA,CAAvB;IADF,CAAA;;EADkB;;EAIpB,aAAA,GAAgB,QAAA,CAAC,KAAD,EAAQ,GAAR,CAAA;WACd,GAAG,CAAC,KAAK,CAAC,MAAV,CAAiB,GAAG,CAAC,UAArB;EADc;;EAGhB,aAAA,GAAgB,QAAA,CAAC,KAAD,EAAQ,GAAR,CAAA;AACd,QAAA;IAAA,IAAA,GAAO,GAAG,CAAC,KAAK,CAAC,OAAV,CAAkB,GAAG,CAAC,MAAtB;IACP,IAAG,IAAH;aACE,EAAE,CAAC,OAAH,CAAW,YAAX,EAAyB;QACvB,KAAA,EAAO,GAAG,CAAC,KADY;QAEvB,KAAA,EAAO,GAAG,CAAC;MAFY,CAAzB,EADF;;EAFc;;EAQhB,WAAA,GAAc,QAAA,CAAC,KAAD,EAAQ,GAAR,CAAA;WACZ,KAAK,CAAC,OAAN,CAAc,GAAG,CAAC,UAAlB,EAA8B,GAAG,CAAC,QAAlC;EADY;;EAGd,IAAA,GAAO,QAAA,CAAA,CAAA;IACL,EAAE,CAAC,IAAH,CAAQ,eAAR,EAAyB,gBAAzB;IACA,EAAE,CAAC,IAAH,CAAQ,eAAR,EAAyB,gBAAzB;IACA,EAAE,CAAC,IAAH,CAAQ,aAAR,EAAuB,cAAvB;IACA,EAAE,CAAC,IAAH,CAAQ,cAAR,EAAwB,mBAAxB;IACA,EAAE,CAAC,IAAH,CAAQ,cAAR,EAAwB,mBAAxB;WACA,EAAE,CAAC,IAAH,CAAQ,YAAR,EAAsB,iBAAtB;EANK;;EAQP,MAAM,CAAC,MAAP,GAAgB,CACd,IADc;AA/ChB",
  "sourcesContent": [
    "assist_queue = []\r\nattack_queue = []\r\nmove_queue = []\r\n\r\non_battle_assist = (evt) ->\r\n  assist_queue.push evt\r\n\r\non_battle_attack = (evt) ->\r\n  attack_queue.push evt\r\n\r\non_battle_move = (evt) ->\r\n  move_queue.push evt\r\n\r\nhandle_assist_queue = (evt) ->\r\n  while assist_queue.length > 0\r\n    handle_assist evt.board, assist_queue.shift()\r\n\r\nhandle_attack_queue = (evt) ->\r\n  while attack_queue.length > 0\r\n    handle_attack evt.board, attack_queue.shift()\r\n\r\nhandle_move_queue = (evt) ->\r\n  while move_queue.length > 0\r\n    handle_move evt.board, move_queue.shift()\r\n\r\nhandle_assist = (board, evt) ->\r\n  evt.astee.assist evt.assistance\r\n\r\nhandle_attack = (board, evt) ->\r\n  hurt = evt.atkee.inflict evt.damage\r\n  if hurt\r\n    ev.trigger 'piece_hurt', {\r\n      piece: evt.atkee, \r\n      coord: evt.coord_to\r\n    }\r\n\r\nhandle_move = (board, evt) ->\r\n  board.move_to evt.coord_from, evt.coord_to\r\n\r\ninit = ->\r\n  ev.hook 'battle_assist', on_battle_assist\r\n  ev.hook 'battle_attack', on_battle_attack\r\n  ev.hook 'battle_move', on_battle_move\r\n  ev.hook 'assist_round', handle_assist_queue\r\n  ev.hook 'attack_round', handle_attack_queue\r\n  ev.hook 'move_round', handle_move_queue\r\n\r\nwindow.battle = {\r\n  init\r\n}"
  ]
}